import{H as b,r as c,j as e,I as C,P as S,T as P,w as k,x as f}from"./index-Dbp6cY2J.js";import{T as u}from"./TextField-CHFAi5Wa.js";import{B as T}from"./Button-BL7aqzdx.js";import{S as w,A as z}from"./Snackbar-Dz79FgWn.js";import"./Menu-BX0TDKzG.js";import"./useSlot-DopozSqz.js";const F=()=>{const{id:m}=b(),[o,d]=c.useState({title:"",price:"",duration:"",description:""}),[x,v]=c.useState(!0),[n,h]=c.useState({open:!1,message:"",severity:"success",vertical:"top",horizontal:"right"});c.useEffect(()=>{(async()=>{var a,r;try{const t=localStorage.getItem("authToken"),i=await f.get(`http://172.236.30.193:8008/api/plan/${m}`,{headers:{Authorization:`Bearer ${t}`}});d(i.data.data)}catch(t){p({message:((r=(a=t.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to fetch plan",severity:"error"})}finally{v(!1)}})()},[m]);const l=s=>{const{name:a,value:r}=s.target;d(t=>({...t,[a]:r}))},y=async s=>{var a,r,t;s.preventDefault();try{const i=localStorage.getItem("authToken"),j=await f.put(`http://172.236.30.193:8008/api/plan/${m}`,o,{headers:{Authorization:`Bearer ${i}`}});p({message:((a=j.data)==null?void 0:a.message)||"Plan updated successfully!",severity:"success"})}catch(i){p({message:((t=(r=i.response)==null?void 0:r.data)==null?void 0:t.message)||"Update failed",severity:"error"})}};if(x)return e.jsx(C,{});const p=({vertical:s="top",horizontal:a="right",message:r,severity:t})=>{h({open:!0,message:r,severity:t,vertical:s,horizontal:a})},g=()=>{h(s=>({...s,open:!1}))};return e.jsxs(e.Fragment,{children:[e.jsxs(S,{sx:{p:3,mx:"auto",mt:0,width:"100%",maxWidth:600},children:[e.jsx(P,{variant:"h4",gutterBottom:!0,children:"Edit plan"}),e.jsxs(k,{component:"form",onSubmit:y,mt:2,children:[e.jsx(u,{label:"Title",name:"title",value:o.title,onChange:l,fullWidth:!0,margin:"normal"}),e.jsx(u,{label:"Price",name:"price",type:"number",value:o.price,onChange:l,fullWidth:!0,margin:"normal"}),e.jsx(u,{label:"Duration (months)",name:"duration",value:o.duration,onChange:l,fullWidth:!0,margin:"normal"}),e.jsx(u,{label:"Description",name:"description",value:o.description,onChange:l,fullWidth:!0,margin:"normal",multiline:!0,rows:3}),e.jsx(T,{variant:"contained",type:"submit",sx:{mt:2,fontWeight:400},children:"Update Plan"})]})]}),e.jsx(w,{open:n.open,autoHideDuration:6e3,onClose:g,anchorOrigin:{vertical:n.vertical,horizontal:n.horizontal},children:e.jsx(z,{onClose:g,severity:n.severity,variant:"filled",sx:{width:"100%"},children:n.message})},n.vertical+n.horizontal)]})};export{F as default};
