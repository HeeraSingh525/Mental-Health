import{r as a,z as g,j as e,P as j,S as P,T as c,v as S,E as w}from"./index-C8xfDxDl.js";import{a as y}from"./index-xsH4HHeE.js";import{u as k,S as C,C as E}from"./CustomPagination-DQV4iMSc.js";import{D as N}from"./DataGrid-D20gD2Ql.js";import"./IconifyIcon-D7GkIti9.js";import"./TextField-B5EzcJf0.js";import"./Menu-DgP7ofbN.js";import"./resolveComponentProps-B6L4jY4Q.js";import"./Toolbar-B3nkfWrd.js";import"./Divider-D0or8ZwX.js";import"./IconButton-wranW75i.js";import"./InputAdornment-BSokBSSk.js";import"./Button-CSP7k2Uo.js";import"./Checkbox-C9DHRAqJ.js";import"./TableCell-0qSGYyas.js";const O=()=>{const[m,d]=a.useState([]),[f,i]=a.useState(!1),[o,n]=a.useState(""),r=k(),h=g();a.useEffect(()=>{(async()=>{var l,p;i(!0),n("");try{const s=localStorage.getItem("authToken"),u=await y.get("http://localhost:5000/api/plan",{headers:{Authorization:`Bearer ${s}`}});d(u.data.data)}catch(s){n(((p=(l=s.response)==null?void 0:l.data)==null?void 0:p.message)||"Failed to fetch plans")}finally{i(!1)}})()},[]);const x=[{field:"title",headerName:"Title",flex:1},{field:"price",headerName:"Price",flex:1},{field:"duration",headerName:"Duration (months)",flex:1},{field:"description",headerName:"Description",flex:2}];return e.jsxs(j,{sx:{p:3},children:[e.jsxs(P,{direction:{md:"row"},rowGap:2,justifyContent:"space-between",alignItems:{md:"center"},mb:2,children:[e.jsx(c,{variant:"h5",color:"primary.dark",children:"All Plans"}),e.jsx(C,{apiRef:r,sx:{maxWidth:350}})]}),f?e.jsx(S,{textAlign:"center",children:e.jsx(w,{})}):o?e.jsx(c,{color:"error.main",children:o}):e.jsx(N,{rows:m.map(t=>({...t,id:t._id})),columns:x,onRowClick:t=>h(`/PlanList/${t.row._id}`),apiRef:r,pageSizeOptions:[5,10,20],initialState:{pagination:{paginationModel:{pageSize:5,page:0}}}}),e.jsx(E,{apiRef:r})]})};export{O as default};
