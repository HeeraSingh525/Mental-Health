import{J as F,j as e,r as s,P as H,T as h,w as J,x as A}from"./index-Dbp6cY2J.js";import{G as n}from"./Grid-r0OtzoMq.js";import{A as q}from"./Avatar-DFEZa8hV.js";import{I as j}from"./Menu-BX0TDKzG.js";import{T as p}from"./TextField-CHFAi5Wa.js";import{D as v}from"./Divider-BnrKH_WB.js";import{I as k,F as I}from"./InputAdornment-BYBFXy2L.js";import{V as z}from"./Visibility-BbAx8QFw.js";import{S as B}from"./Switch-DMk434Re.js";import{B as K}from"./Button-BL7aqzdx.js";import{S as Q,A as X}from"./Snackbar-Dz79FgWn.js";import"./useSlot-DopozSqz.js";const Y=F([e.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),e.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera"),N=F(e.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),me=()=>{const[D,E]=s.useState(!0),[L,M]=s.useState(!1),[u,T]=s.useState(!1),[x,V]=s.useState(!1),[y,w]=s.useState(),[c,W]=s.useState(),[f,O]=s.useState(),[d,R]=s.useState(),[l,S]=s.useState("/avatar.png"),P=localStorage.getItem("authToken"),[r,C]=s.useState({open:!1,message:"",severity:"success",vertical:"top",horizontal:"right"}),U=async()=>{try{const t=await A.get("http://172.236.30.193:8008/api/admin",{headers:{Authorization:`Bearer ${P}`}});R(t.data.data[0]),w(t.data.data[0].name),S(t.data.data[0].profile),console.log("fetchAdminData",d)}catch(t){console.error("Error saving settings:",t)}};s.useEffect(()=>{U()},[]);const $=t=>{var i;const o=(i=t.target.files)==null?void 0:i[0];o&&S(o)},G=async()=>{var t,o,i;if(c||f){if(!c||!f){m({message:"Please confirm your new password.",severity:"error"});return}if(c!==f){m({message:"Passwords do not match!",severity:"error"});return}}try{const a=new FormData;a.append("name",y),l&&a.append("profile",l),c&&a.append("password",c);const g=await A.post("http://172.236.30.193:8008/api/admin/update",a,{headers:{Authorization:`Bearer ${P}`}});g.status===200||g.status===201?m({message:((t=g.data)==null?void 0:t.message)||"User updated successfully!",severity:"success"}):m({message:"Something went wrong. Please try again.",severity:"error"})}catch(a){m({message:((i=(o=a.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to update Admin. Please try again.",severity:"error"})}},m=({vertical:t="top",horizontal:o="right",message:i,severity:a})=>{C({open:!0,message:i,severity:a,vertical:t,horizontal:o})},b=()=>{C(t=>({...t,open:!1}))};return e.jsxs(e.Fragment,{children:[e.jsxs(H,{sx:{p:3},children:[e.jsx(h,{variant:"h4",gutterBottom:!0,sx:{mb:3},children:"Admin Profile Settings"}),e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Profile Information"}),e.jsxs(n,{container:!0,spacing:2,alignItems:"center",sx:{mb:3},children:[e.jsx(n,{item:!0,xs:12,sm:2,children:e.jsxs(J,{position:"relative",display:"inline-block",children:[e.jsx(q,{src:l?l instanceof File?URL.createObjectURL(l):`http://172.236.30.193:8008/${l}`:"",alt:"Admin-profile",sx:{width:80,height:80}}),e.jsxs(j,{color:"primary",component:"label",sx:{position:"absolute",bottom:-8,right:-8},children:[e.jsx(Y,{fontSize:"small"}),e.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:$})]})]})}),e.jsx(n,{item:!0,xs:12,sm:5,children:e.jsx(p,{fullWidth:!0,label:"Full Name",value:y||"",onChange:t=>{w(t.target.value)}})}),e.jsx(n,{item:!0,xs:12,sm:5,children:e.jsx(p,{fullWidth:!0,label:"Email",value:(d==null?void 0:d.email)||"",disabled:!0})})]}),e.jsx(v,{sx:{my:3}}),e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Account Security"}),e.jsxs(n,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(p,{fullWidth:!0,label:"New Password",type:u?"text":"password",onChange:t=>{W(t.target.value)},InputProps:{endAdornment:e.jsx(k,{position:"end",children:e.jsx(j,{onClick:()=>T(!u),children:u?e.jsx(N,{}):e.jsx(z,{})})})}})}),e.jsx(n,{item:!0,xs:12,sm:6,children:e.jsx(p,{fullWidth:!0,label:"Confirm Password",type:x?"text":"password",onChange:t=>{O(t.target.value)},InputProps:{endAdornment:e.jsx(k,{position:"end",children:e.jsx(j,{onClick:()=>V(!x),children:x?e.jsx(N,{}):e.jsx(z,{})})})}})})]}),e.jsx(v,{sx:{my:3}}),e.jsx(h,{variant:"h6",gutterBottom:!0,children:"Preferences"}),e.jsx(I,{control:e.jsx(B,{checked:D,onChange:t=>E(t.target.checked)}),label:"Email Notifications"}),e.jsx(I,{control:e.jsx(B,{checked:L,onChange:t=>M(t.target.checked)}),label:"SMS Notifications"}),e.jsx(v,{sx:{my:3}}),e.jsx(K,{variant:"contained",color:"primary",onClick:G,sx:{fontWeight:400},children:"Save Changes"})]}),e.jsx(Q,{open:r.open,autoHideDuration:6e3,onClose:b,anchorOrigin:{vertical:r.vertical,horizontal:r.horizontal},children:e.jsx(X,{onClose:b,severity:r.severity,variant:"filled",sx:{width:"100%"},children:r.message})},r.vertical+r.horizontal)]})};export{me as default};
