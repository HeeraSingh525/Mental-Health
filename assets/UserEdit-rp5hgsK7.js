import{H as S,r as i,j as e,I as b,P as k,T as C,w as U,x as f}from"./index-Dbp6cY2J.js";import{T as x}from"./TextField-CHFAi5Wa.js";import{B as w}from"./Button-BL7aqzdx.js";import{S as z,A}from"./Snackbar-Dz79FgWn.js";import"./Menu-BX0TDKzG.js";import"./useSlot-DopozSqz.js";const $=()=>{const{id:l}=S(),[c,h]=i.useState({name:"",email:""}),[v,y]=i.useState(!0),[o,d]=i.useState({open:!1,message:"",severity:"success",vertical:"top",horizontal:"right"}),m=({vertical:r="top",horizontal:a="right",message:s,severity:t})=>{d({open:!0,message:s,severity:t,vertical:r,horizontal:a})},p=()=>{d(r=>({...r,open:!1}))};i.useEffect(()=>{(async()=>{var a,s;try{const t=localStorage.getItem("authToken"),n=await f.get(`http://172.236.30.193:8008/api/user/${l}`,{headers:{Authorization:`Bearer ${t}`}});h(n.data)}catch(t){console.log(((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to fetch user")}finally{y(!1)}})()},[l]);const g=r=>{const{name:a,value:s}=r.target;h(t=>({...t,[a]:s}))},j=async r=>{var a,s,t;r.preventDefault();try{const n=localStorage.getItem("authToken"),u=await f.post(`http://172.236.30.193:8008/api/user/${l}`,c,{headers:{Authorization:`Bearer ${n}`}});u.status===200||u.status===201?m({message:((a=u.data)==null?void 0:a.message)||"User updated successfully!",severity:"success"}):m({message:"Something went wrong. Please try again.",severity:"error"})}catch(n){m({message:((t=(s=n.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to update user. Please try again.",severity:"error"})}};return v?e.jsx(b,{}):e.jsxs(e.Fragment,{children:[e.jsxs(k,{sx:{p:3,mx:"auto",mt:0,width:"100%",maxWidth:600},children:[e.jsx(C,{variant:"h4",gutterBottom:!0,children:"Edit User"}),e.jsxs(U,{component:"form",onSubmit:j,mt:2,children:[e.jsx(x,{label:"Name",name:"name",value:c.name,onChange:g,fullWidth:!0,margin:"normal"}),e.jsx(x,{label:"Email",name:"email",value:c.email,onChange:g,fullWidth:!0,margin:"normal"}),e.jsx(w,{variant:"contained",type:"submit",sx:{mt:2,fontWeight:400},children:"Update User"})]})]}),e.jsx(z,{open:o.open,autoHideDuration:6e3,onClose:p,anchorOrigin:{vertical:o.vertical,horizontal:o.horizontal},children:e.jsx(A,{onClose:p,severity:o.severity,variant:"filled",sx:{width:"100%"},children:o.message})},o.vertical+o.horizontal)]})};export{$ as default};
