import{A as p,j as e,r as a,z as E,P as I,S as y,T as i,v as z}from"./index-C8xfDxDl.js";import{a as C}from"./index-xsH4HHeE.js";import{u as N,S as k,C as D}from"./CustomPagination-DQV4iMSc.js";import{V as U}from"./Visibility-uUABZk2F.js";import{D as A,T as n}from"./DataGrid-D20gD2Ql.js";import{I as l}from"./IconButton-wranW75i.js";import"./IconifyIcon-D7GkIti9.js";import"./TextField-B5EzcJf0.js";import"./Menu-DgP7ofbN.js";import"./resolveComponentProps-B6L4jY4Q.js";import"./Toolbar-B3nkfWrd.js";import"./Divider-D0or8ZwX.js";import"./InputAdornment-BSokBSSk.js";import"./Button-CSP7k2Uo.js";import"./Checkbox-C9DHRAqJ.js";import"./TableCell-0qSGYyas.js";const M=p(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),T=p(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),X=()=>{const o=N(),[x,f]=a.useState([]),[u,c]=a.useState(!1),[m,g]=a.useState(""),j=E();a.useEffect(()=>{(async()=>{var d,h;c(!0);try{const s=localStorage.getItem("authToken"),w=(await C.get("http://localhost:5000/api/user",{headers:{Authorization:`Bearer ${s}`}})).data.map((r,v)=>({id:v+1,name:r.name,mongoId:r._id,email:r.email,status:r.status||"Active"}));f(w)}catch(s){console.error("Error fetching users:",s),g(((h=(d=s.response)==null?void 0:d.data)==null?void 0:h.message)||"Failed to fetch users")}finally{c(!1)}})()},[]);const S=[{field:"id",headerName:"ID",width:90},{field:"name",headerName:"Name",flex:1,minWidth:150},{field:"email",headerName:"Email",flex:1.5,minWidth:200},{field:"status",headerName:"Status",flex:1,minWidth:120,renderCell:t=>e.jsx(i,{className:"UserStatus",color:t.value==="Active"?"success.main":"error.main",children:t.value})},{field:"action",headerName:"Actions",flex:1,minWidth:120,sortable:!1,filterable:!1,renderCell:t=>e.jsxs(e.Fragment,{children:[e.jsx(n,{title:"View",children:e.jsx(l,{onClick:()=>j(`/users/${t.row.mongoId}`),children:e.jsx(U,{color:"green"})})}),e.jsx(n,{title:"Edit",children:e.jsx(l,{onClick:()=>console.log("Edit",t.row),children:e.jsx(M,{color:"primary"})})}),e.jsx(n,{title:"Delete",children:e.jsx(l,{onClick:()=>console.log("Delete",t.row),children:e.jsx(T,{color:"error"})})})]})}];return e.jsxs(I,{sx:{p:3},children:[e.jsxs(y,{direction:{md:"row"},rowGap:2,justifyContent:"space-between",alignItems:{md:"center"},children:[e.jsx(i,{variant:"h4",color:"primary.dark",children:"User Management"}),e.jsx(k,{apiRef:o,sx:{maxWidth:300}})]}),e.jsx(z,{sx:{height:420,width:1,mt:3},children:e.jsx(A,{apiRef:o,rows:x,columns:S,loading:u,pageSizeOptions:[5,10],initialState:{pagination:{paginationModel:{pageSize:5,page:0}}}})}),e.jsx(D,{apiRef:o}),m&&e.jsx(i,{mt:2,color:"error.main",children:m})]})};export{X as default};
